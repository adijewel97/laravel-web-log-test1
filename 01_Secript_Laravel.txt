composer create-project --prefer-dist laravel/laravel mivp2apstpln-web-v31 "^9.0"

docker-compose down
docker-compose up -d --build

php artisan config:cache
php artisan route:cache
php artisan view:cache


php artisan cache:clear
php artisan config:clear
php artisan config:cache
php artisan route:clear
php artisan view:clear
php artisan optimize:clear

ssss

npm install
npm run production

-------------------------------------------------------------------------------
isue saat start :
1. http://localhost:8081/ : error 500/Server Error
   sulusi
   - chek file *.env ada ngak ? jika tidak ada tambahkan
   - chek isi :
     - dev :
      APP_ENV=local
      APP_DEBUG=true
     -Prod: 
      APP_ENV=production
      APP_DEBUG=false

2. css tidak sesuai saat devlop
   solusi
   - D:\laragon\www\mivp2apstpln-web-v3\public\mystyle
   - ini harus sesuai dengan dev

3. tidak konek api
   - .env
      SVR_API_SVR_USE="URL"
      # SVR_API_SVR_URL="mivp2apstpln-api2.test"
      SVR_API_SVR_URL="http://nginx_webserver:80" #connect ke docker
      SVR_API_SVR_ALIAS="api/mivp2apstpln"
   
   solusi : 
   - file env
      networks:
      laravel_mivp2apst_net:
         external: true

     copy dari file yml D:\laragon\www\mivp2apstpln-web-v3\docker-compose-web-net-api.yml
4. file pdf struk blank error 404 
   # Run storage:link
     RUN php artisan storage:link

     dengan

     nginx
      # Mengarahkan akses ke storage link
      location /storage/ {
         alias /var/www/mivp2apstpln_webv31/storage/app/public/;
         access_log off;
         log_not_found off;
         try_files $uri $uri/ =404;
      }

5. cara buat cronjob hapus file pdf yg lebih 1 jam
   docker exec -it laravel_mivp2apstpln_webv31 /bin/bash

   find /var/www/mivp2apstpln_webv31/storage/app/public/report -type f -name "*.pdf" -mmin +60 -delete

   --chek cronjob ststus
   service cron status

   docker exec -it <nama_container> bash
   apt-get update && apt-get install -y nano

   nano /usr/local/bin/cleanup_pdfs.sh





 
-------------------------------------------------------------------------------
1. saat download file pdf error 404 not foun lakukan perintah
    php artisan storage:link
   tambahkan dockerfile # Set permissions
   
   # Run storage:link
     RUN php artisan storage:link

  -- docker images
  -- docker build -t laravel_mivp2apstpln_webv31 .  (Pake titik di belakang path)

2. docker external 
  docker network create laravel_mivp2apst_net
   
3. ocker builder prune

    